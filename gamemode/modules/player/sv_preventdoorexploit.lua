
module( "Players.DoorExploit", package.seeall )

ExploitableDoors = {
	"func_door",
	"prop_door_rotating", 
	"func_door_rotating"
}

-- Called when a player tries to use an object.
function PlayerUse( ply, ent )

	-- Prevent dead or spectating players from being able to use stuff.
	if !ply:Alive() || ply:Team() == TEAM_SPECTATOR || ply:Team() == TEAM_UNASSIGNED then
		return false
	end
	
	-- Prevent the door exploit (players spamming use key).
	if table.HasValue(ExploitableDoors, ent:GetClass()) && ply.last_door_time && ply.last_door_time + 0.5 > CurTime() then
		return false
	end
	
	ply.last_door_time = CurTime()
	
	return true
	
end
hook.Add( "PlayerUse", "Players.DoorExploit", PlayerUse )